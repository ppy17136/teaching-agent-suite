```markdown
# 教学智能体平台（教评一体化 · 可验证生成 VGE · Streamlit Demo）

本仓库提供一个可在线演示的教学文件智能生成与教评闭环平台（Streamlit 应用），面向“教评一体化”场景，支持从**培养方案**出发，自动生成并联动构建课程全套教学文件，并提供**可验证生成（Verifiable Generation, VGE）**的证据链与一致性校验能力。

> 适用：教学改革/教创赛/信息化申报/教学成果支撑材料演示  
> 部署：Streamlit Community Cloud 一键上线

---

## ✨ 核心能力一览

### 1) 教学文件链（Design Chain）
- 培养方案（生成 / 上传抽取）
- 课程教学大纲（依据培养方案生成）
- 教学日历（依据大纲生成）
- 教案（依据日历按周次生成）
- 作业/题库/试卷（依据课程目标覆盖生成）

### 2) 教评闭环（Evaluation Closed-Loop）
- 试题审核表（题目-课程目标映射与覆盖检查）
- 课程目标达成情况评价依据合理性审核表
- 课程目标达成情况评价报告（达成度、原因分析、改进措施）

### 3) 过程证据链（Evidence Chain）
- 课堂状态监测（上传课堂照片 → 人脸检测 → 生成“Stu编号”状态摘要）
- 将课堂状态摘要写入过程证据，用于授课手册与达成报告引用

### 4) 可验证生成 VGE（Verifiable Generation）
- 每份产物生成版本化记录（Artifacts）
- 哈希链追溯（parent_hash → self_hash）
- 一致性校验（培养方案→大纲→日历等关键字段依赖检查）
- 证据链日志导出（JSON）

---

## 🧠 运行模式

- **演示模式（无API）**：无需配置任何 Key，平台可完整运行并自动生成示例数据（适合评审快速体验）。
- **在线模式（千问 API）**：配置 `QWEN_API_KEY` 后启用：
  - 文本智能生成（大纲/日历/教案/题库/报告）
  - 视觉AI课堂状态估计（可选，耗时/耗API）

> 默认：即使不填 Key，也能成功运行（演示模式）。

---

## 📦 项目结构

```

.
├─ app.py
├─ requirements.txt
└─ data/                # 运行后自动生成：SQLite 数据库、模型文件、缓存等

````

---

## 🚀 本地运行

### 1) 创建环境并安装依赖
```bash
pip install -r requirements.txt
````

### 2) 启动

```bash
streamlit run app.py
```

浏览器打开页面后即可使用。

---

## ☁️ Streamlit Community Cloud 部署

1. 将本仓库推送到 GitHub（公开仓库更方便演示）
2. 打开 Streamlit Community Cloud → New app → 选择该仓库
3. main file 选择 `app.py`
4. （可选）在 **Settings → Secrets** 添加：

```toml
QWEN_API_KEY="你的DashScope Key"
```

保存后重启应用即可进入在线模式。

---

## 🔐 隐私与合规说明（建议写进申报材料）

* 系统默认使用 **Stu编号** 标记学生，不做身份识别与实名关联。
* 课堂状态评估为概率估计，仅用于教学参考与课堂调控建议。
* 过程证据链仅记录摘要结果与哈希，不强制保存原始图像。

---

## ✅ 推荐演示流程（2~3分钟）

1. 创建项目（专业/年级/课程体系）
2. 生成或上传培养方案 → 一键生成教学大纲
3. 由大纲生成教学日历 → 由日历生成教案
4. 生成题库与试卷方案 → 生成审核表与达成评价报告
5. 上传课堂照片 → 写入过程证据 → 生成授课手册
6. 打开“证据链与可验证生成”页面 → 导出证据链日志 JSON
7. 一键导出多份 DOCX（用于申报材料提交）

---

## 📌 Roadmap（可选增强）

* 将学校现有 Word 模板（大纲/日历/审核表/报告）做成“模板填充式导出”
* 支持上传成绩表（Excel/CSV）自动计算达成度并生成报告
* 增加“版本回滚”与依赖影响范围提示
* 更丰富的可视化仪表盘（课程目标达成趋势、薄弱点定位）

---

## 📄 License

建议选择 Apache-2.0（公开演示友好）或 MIT。
如为申报材料内部使用，也可暂不添加 License。

---

## 联系与说明

本项目为教学场景演示平台，可根据学校模板与制度进行二次定制（字段、版式、审核流程与证据链规则等）。



